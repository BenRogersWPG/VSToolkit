/*

 Copyright (C) 2009-2012. David Thevenin, ViniSketch SARL (c), and 
 contributors. All rights reserved

 This program is free software: you can redistribute it and/or modify
 it under the terms of the GNU Lesser General Public License as published
 by the Free Software Foundation, either version 3 of the License, or
 (at your option) any later version.

 This program is distributed in the hope that it will be useful,
 but WITHOUT ANY WARRANTY; without even the implied warranty of
 MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
 GNU Lesser General Public License for more details.

 You should have received a copy of the GNU Lesser General Public License
 along with this program. If not, see <http://www.gnu.org/licenses/>.
*/
(function(A,w){function d(){this.parent=l.Task;this.parent();this.constructor=d;arguments.length&&(this.setAnimations(arguments),this.keyFrames["100%"]=this)}function p(a){this.parent=l.EventSource;this.parent();this.constructor=p;if(a)this._fsm=new l.Fsm(this),this._fsm.goTo=this.goTo,this._owner=a}function h(a){this.parent=p;this.parent(a);this.constructor=h;if(arguments.length)this._fsm.addInput(h.NEXT),this._fsm.addInput(h.PRED),this._fsm.addInput(h.FIRST),this._states_array=[]}function n(a){this.parent=
h;this.parent(a);this.constructor=n;if(arguments.length)this._transition_out_1=new TranslateAnimation(0,0,0),this._transition_out_2=new TranslateAnimation(0,0,0),this._transition_clear=new TranslateAnimation(0,0,0),this.animationDuration=n.ANIMATION_DURATION}function k(a,c,b){this.parent=p;this.parent(a);this.constructor=k;if(arguments.length)this._animation_type=b==k.NO_ANIMATION||b==k.CARD_ANIMATION||b==k.SLIDE_ANIMATION?b:k.DEFAULT_ANIMATION,this.setNavigationBar(c),this.__nav_bar_states={}}function j(a){this.parent=
h;this.parent(a);this.constructor=j;if(a)this._transition_out=new TranslateAnimation(0,0,0),this._transition_clear=new TranslateAnimation(0,0,0),this.animationDuration=j.ANIMATION_DURATION}function m(a,c){this.parent=h;this.parent(a,c);this.constructor=m;a&&a.setStyle("-webkit-transform-style","preserve-3d")}function t(a,c){this.parent=h;this.parent(a,c);this.constructor=t;this.animationDuration=t.ANIMATION_DURATION}var q=A.document,y=A.vs,g=y.util,l=y.core,O=y.ui,r=y.fx,s=g.setElementTransform,P=
g.vsTestStyle.webkitTransform||g.vsTestStyle.msTransform,o="WebKitCSSMatrix"in A&&"m11"in new WebKitCSSMatrix;g.extend(r,{SUPPORT_CSS_TRANSFORM:P,SUPPORT_3D_TRANSFORM:o});if(g.vsTestStyle.webkitTransform!==w)var B="-webkit-animation-duration",C="-webkit-animation-delay",x="-webkit-animation-name",D="webkitAnimationEnd",I="-webkit-animation-timing-function",E="-webkit-transition-duration",F="-webkit-transition-delay",G="webkitTransitionEnd",J="-webkit-transition-timing-function",K="-webkit-transition-property",
L="-webkit-transform-origin",z="-webkit-animation-iteration-count",v="-webkit-transform",M="-webkit-keyframes";else g.vsTestStyle.msTransform!==w?(B="-ms-animation-duration",C="-ms-animation-delay",x="-ms-animation-name",D="msAnimationEnd",I="-ms-animation-timing-function",E="-ms-transition-duration",F="-ms-transition-delay",G="msTransitionEnd",J="-ms-transition-timing-function",K="-ms-transition-property",L="-ms-transform-origin",z="-ms-animation-iteration-count",v="-ms-transform",M="-ms-keyframes"):
(B="animation-duration",C="animation-delay",x="animation-name",D="animationEnd",I="animation-timing-function",E="transition-duration",F="transition-delay",G="transitionEnd",J="transition-timing-function",K="transition-property",L="transform-origin",z="animation-iteration-count",v="transform",M="keyframes");var Q=RegExp(/\$width/g),R=RegExp(/\$height/g),S=RegExp(/\$x/g),T=RegExp(/\$y/g),N=RegExp(/\$\{([\w]+)\}/g),U=function(a,c,b,e){if(!c||!a||!a.view)console.error("procesAnimation: invalid component parameter!");
else{var f,h,j,u,n,m=l.createId(),k;k=c.keyFrames["0%"]?!0:!1;f=function(){var b;b=k?B:E;g.isArray(c.origin)&&c.origin.length===2&&a.setStyle(L,c.origin[0]+"% "+c.origin[1]+"%");g.isString(c.durations)?a.setStyle(b,c.durations):g.isArray(c.durations)?a.setStyle(b,c.durations.join(", ")):a.setStyle(b,d.DEFAULT_DURATION);b=k?C:F;g.isNumber(c.delay)?a.setStyle(b,c.delay+"ms"):a.setStyle(b,"0");b=k?I:J;g.isString(c.timings)?a.setStyle(b,c.timings):g.isArray(c.timings)?a.setStyle(b,c.timings.join(", ")):
a.setStyle(b,d.EASE);c.iterationCount==="infinite"?a.setStyle(z,"infinite"):!c.iterationCount||!g.isNumber(c.iterationCount)?a.setStyle(z,"1"):a.setStyle(z,c.iterationCount)};h=function(b,e){var f,d=[],h;if(g.isNumber(b))return b;if(g.isString(b)){b=b.replace(Q,a.size[0]+"px");b=b.replace(R,a.size[1]+"px");b=b.replace(S,a.position[0]+"px");b=b.replace(T,a.position[1]+"px");for(f=N.exec(b);f&&f.length===2;)d.push(f[1]),f=N.exec(b);for(f=0;f<d.length;f++)h=d[f],typeof e[h]!=="undefined"?b=b.replace("${"+
h+"}",e[h]):typeof c[h]!=="undefined"&&(b=b.replace("${"+h+"}",c[h]));return b}console.warn("vs.fx.Animation._parseValue. Unknown value's type: "+b);return 0};j=function(){f();var g,d=this;g=function(f){f.currentTarget===a.view&&(a.view.removeEventListener(G,g,!1),a.view.style.removeProperty(E),a.view.style.removeProperty(F),c.delegate&&c.delegate.taskDidEnd&&c.delegate.taskDidEnd(c),b&&b.call(e?e:d))};a.view.addEventListener(G,g,!1);u()};u=function(){var b=c.keyFrames["100%"]?c.keyFrames["100%"]:
c,e="",f,g=[],d;if(b)for(i=0;i<c.properties.length;i++)f=c.properties[i],d=h(c.values[i],b),f==="rotate"?(e+="rotate("+d+") ",f=v):f==="skew"?(e+="skew("+d+") ",f=v):o&&f==="translate"?(e+="translate3d("+d+") ",f=v):f==="translate"?(e+="translate("+d+") ",f=v):f==="translateX"?(e+="translateX("+d+") ",f=v):f==="translateY"?(e+="translateY("+d+") ",f=v):f==="rotateX"?(e+="rotateX("+d+") ",f=v):f==="rotateY"?(e+="rotateY("+d+") ",f=v):f==="scale"?(e+="scale("+d+") ",f=v):a.setStyle(f,d),g.indexOf(f)==
-1&&g.push(f);e&&s(a.view,e);a.setStyle(K,g.join(","))};n=function(){f();var g,h;g=function(f){if(f.currentTarget===a.view){a.view.removeEventListener(D,g,!1);k&&u();a.view.style.removeProperty(B);a.view.style.removeProperty(C);if(h=a.getStyle(x))h=h.replace(m,""),a.setStyle(x,h);try{if((data=d.__css_animations[m])&&data.length===2)q.getElementsByTagName("head")[0].removeChild(data[0]),delete d.__css_animations[m]}catch(j){return console.error(j),!1}c.delegate&&c.delegate.taskDidStop&&c.delegate.taskDidEnd(c);
b&&b.call(e?e:self)}};a.view.addEventListener(D,g,!1);(h=a.getStyle(x))?h+=", "+m:h=m;a.setStyle(x,h)};k?function(){var b,e,f,u,j,l,k,H=q.createElement("style");H.type="text/css";var p="";for(e in c.keyFrames){l="";b=c.keyFrames[e];f="";if(g.isArray(b))for(u=0;u<b.length;u++)k=b[u],k==null||typeof k=="undefined"||(k=h(k,c),(j=c.properties[u])&&(j==="rotate"?l+="rotate("+k+") ":j==="skew"?l+="skew("+k+") ":o&&j==="translate"?l+="translate3d("+k+") ":j==="translate"?l+="translate("+k+") ":j==="translateX"?
l+="translateX("+k+") ":j==="translateY"?l+="translateY("+k+") ":j==="rotateX"?l+="rotateX("+k+") ":j==="rotateY"?l+="rotateY("+k+") ":j==="scale"?l+="scale("+k+") ":f+=j+":"+k+";"));else for(u=0;u<c.properties.length;u++)k=h(c.values[u],b),(j=c.properties[u])&&(j==="rotate"?l+="rotate("+k+") ":j==="skew"?l+="skew("+k+") ":o&&j==="translate"?l+="translate3d("+k+") ":j==="translate"?l+="translate("+k+") ":j==="translateX"?l+="translateX("+k+") ":j==="translateY"?l+="translateY("+k+") ":j==="rotateX"?
l+="rotateX("+k+") ":j==="rotateY"?l+="rotateY("+k+") ":j==="scale"?l+="scale("+k+") ":f+=j+":"+k+";");l&&(f+=v+": "+l+";");p+=e+" { "+f+" } "}b=q.createTextNode("@"+M+" "+m+" { "+p+" }");H.appendChild(b);q.getElementsByTagName("head")[0].appendChild(H);d.__css_animations[m]=[H,a];n()}():j();return m}};d.__css_animations={};d.DEFAULT_DURATION="0.3s";d.DEFAULT_TIMING=d.EASE;d.prototype={properties:null,values:null,durations:null,timings:null,origin:null,iterationCount:1,delay:0,keyFrames:null,setAnimations:function(a){var c,
b,e;this.properties=[];this.values=[];this.timings=[];this.keyFrames={};this.timings=this.durations=this.origin=null;for(c=0;c<a.length;c++)e=a[c],!g.isArray(e)||e.length!==2?console.warn("vs.fx.Animation, invalid animations"):(b=e[0],e=e[1],!g.isString(b)||!g.isString(e)?console.warn("vs.fx.Animation, invalid constructor argument option: ["+b+", "+e+"]"):(this.properties.push(b),this.values.push(e)))},addKeyFrame:function(a,c){if(c)if(a==="from")this.keyFrames["0%"]=c;else if(a==="to")this.keyFrames["100%"]=
c;else if(g.isNumber(a)&&!(a<0||a>100))this.keyFrames[a+"%"]=c},process:function(a,c,b){return U(a,this,c,b)},clone:function(){var a=new d,c,b;if(this.properties)a.properties=this.properties.slice();if(this.values)a.values=this.values.slice();if(this.durations)a.durations=this.durations;if(this.timings)a.timings=this.timings.slice();if(this.origin)a.origin=this.origin.slice();if(this.keyFrames)for(c in this.keyFrames)c!=="100%"&&(b=this.keyFrames[c],a.keyFrames[c]=g.isArray(b)?b.slice():y.util.clone(b));
a.iterationCount=this.iterationCount;a.delay=this.delay;return a},start:function(a){this.process(a)}};g.extendClass(d,l.Task);g.defineClassProperties(d,{duration:{set:function(a){if(a)this.durations=[a]},get:function(){return this.durations&&this.durations.length?this.durations[0]:d.DEFAULT_DURATION}},timing:{set:function(a){if(a)this.timings=[a]},get:function(){return this.timings&&this.timings.length?this.timings[0]:d.EASE}}});d.EASE="ease";d.LINEAR="linear";d.EASE_IN="ease-in";d.EASE_OUT="ease-out";
d.EASE_IN_OUT="ease-in-out";TranslateAnimation=function(a,c,b){this.parent=d;if(arguments.length){o?this.parent(["translate","${x}px,${y}px,${z}px"]):this.parent(["translate","${x}px,${y}px"]);if(g.isNumber(a))this.x=a;if(g.isNumber(c))this.y=c;if(g.isNumber(b))this.z=b}else this.parent();this.constructor=TranslateAnimation};TranslateAnimation.prototype={x:0,y:0,z:0};g.extendClass(TranslateAnimation,d);RotateAnimation=function(a){this.parent=d;if(arguments.length){if(this.parent(["rotate","${deg}deg"]),
g.isNumber(a))this.deg=a}else this.parent();this.constructor=RotateAnimation};RotateAnimation.prototype={deg:0};g.extendClass(RotateAnimation,d);RotateXYZAnimation=function(a,c,b){this.parent=d;if(arguments.length){this.parent(["rotateX","${degX}deg"],["rotateY","${degY}deg"],["rotate","${degZ}deg"]);if(g.isNumber(a))this.degX=a;if(g.isNumber(c))this.degY=c;if(g.isNumber(b))this.degZ=b}else this.parent();this.constructor=RotateXYZAnimation};RotateXYZAnimation.prototype={degX:0,degY:0,degZ:0};g.extendClass(RotateXYZAnimation,
d);ScaleAnimation=function(a,c){this.parent=d;if(arguments.length){this.parent(["scale","${sx},${sy}"]);if(g.isNumber(a))this.sx=a;if(g.isNumber(c))this.sy=c;if(!g.isNumber(c))this.sy=this.sx}else this.parent();this.constructor=ScaleAnimation};ScaleAnimation.prototype={sx:1,sy:1};g.extendClass(ScaleAnimation,d);SkewAnimation=function(a,c){this.parent=d;if(arguments.length){this.parent(["skew","${ax}deg,${ay}deg"]);if(g.isNumber(a))this.ax=a;if(g.isNumber(c))this.ay=c}else this.parent();this.constructor=
SkewAnimation};SkewAnimation.prototype={ax:0,ay:0};g.extendClass(SkewAnimation,d);OpacityAnimation=function(a){this.parent=d;if(arguments.length){if(this.parent(["opacity","${value}"]),g.isNumber(a))this.value=a}else this.parent();this.constructor=OpacityAnimation};OpacityAnimation.prototype={value:1};g.extendClass(OpacityAnimation,d);d.SlideOutRight=new d(["translateX","$width"]);d.SlideOutRight.addKeyFrame(0,["0px"]);d.SlideOutLeft=new d(["translateX","-$width"]);d.SlideOutLeft.addKeyFrame(0,["0px"]);
d.SlideOutTop=new d(["translateY","-$height"]);d.SlideOutTop.addKeyFrame(0,["0px"]);d.SlideOutBottom=new d(["translateY","$height"]);d.SlideOutBottom.addKeyFrame(0,["0px"]);d.SlideInRight=new d(["translateX","0px"]);d.SlideInRight.addKeyFrame(0,["$width"]);d.SlideInLeft=new d(["translateX","0px"]);d.SlideInLeft.addKeyFrame(0,["-$width"]);d.SlideInTop=new d(["translateY","0px"]);d.SlideInTop.addKeyFrame(0,["-$height"]);d.SlideInBottom=new d(["translateY","0px"]);d.SlideInBottom.addKeyFrame(0,["$height"]);
d.FadeIn=new d(["opacity","1"]);d.FadeIn.addKeyFrame(0,["0"]);d.FadeOut=new d(["opacity","0"]);d.FadeOut.addKeyFrame(0,["1"]);r.Animation=d;r.cancelAnimation=function(a){if(!a)return!1;var c,b;if((b=d.__css_animations[a])&&b.length===2){if(!b[1]||!b[1].getStyle||!b[0])return!1;c=b[1].getStyle(x);if(!c)return!1;c=c.replace(a,"");b[1].setStyle(x,c);try{q.getElementsByTagName("head")[0].removeChild(b[0])}catch(e){return console.error(e),!1}delete d.__css_animations[a]}else return!1;return!0};r.TranslateAnimation=
TranslateAnimation;r.RotateAnimation=RotateAnimation;r.RotateXYZAnimation=RotateXYZAnimation;r.ScaleAnimation=ScaleAnimation;r.SkewAnimation=SkewAnimation;r.OpacityAnimation=OpacityAnimation;p.prototype={_delegate:null,_owner:null,_fsm:null,_initial_component:null,destructor:function(){if(this._owner)this._owner.__controller__=w,this._owner.remove=this._owner._ab_controller_remove,this._owner._ab_controller_remove=w;this._delegate=w;g.free(this._fsm);l.EventSource.prototype.destructor.call(this)},
initComponent:function(){l.EventSource.prototype.initComponent.call(this);this._fsm&&this._fsm.init();this._owner?this._owner.__controller__?console.error("The owner already use a controller"):(this._owner.__controller__=this,this._owner._ab_controller_remove=this._owner.remove,this._owner.remove=this.ab_controller_remove):console.error("Invalid vs.fx.Controller, owner is null vs.fx.Controller.id = '"+this._id+"'")},ab_controller_remove:function(a){a&&((state=this.__controller__._fsm._list_of_state[a.id])?
this.__controller__.remove(a):this._ab_controller_remove(a))},isStateExit:function(a){if(!this._fsm)return!1;if(this._fsm._list_of_state[a])return!0;return!1},add:function(a,c,b,e){console.warn("vs.fx.Controller.add is deprecated. Use vs.fx.Controller.push");return this.push(a,c,b,e)},push:function(a,c,b,e){if(a&&this._fsm){c||(c={});var f=null,d,h,f=g.isString(a)&&c.id?c.id:!g.isString(a)&&a.id?a.id:l.createId();if(!this.isStateExit(f)){this._fsm.addState(f);this._fsm._list_of_state[f].bindings=
{};if(e&&e.length)for(h=0;h<e.length;h++)d=e[h],!d||d.length!==3?console.warn("vs.fx.Controller.push: invalid binding information"):this.componentBind(f,d[0],d[1],d[2]);this.setStateComponentInformation(f,a,b,c);return f}}},remove:function(a){if(a&&this._owner&&this._fsm){var c=null;if(g.isString(a))c=a;else if(!g.isString(a))c=a.id;(a=this._fsm._list_of_state[c])&&a.comp&&this._owner._ab_controller_remove(a.comp);this._fsm.removeState(c)}},setStateComponentInformation:function(a,c,b,e){if(a&&this._fsm&&
this._fsm.existState(a)&&c&&this._owner)e=e?g.clone(e):{},a=this._fsm._list_of_state[a],a.init_data=e,g.isString(c)?(a.comp_name=c,a.comp=w):(a.comp_name="",a.comp=c,this._owner.isChild(c)||this._owner.add(c,b))},addTransition:function(a,c,b,e,f){var g;if(a&&this._fsm&&this._fsm.existState(a)&&c&&this._fsm.existState(c)&&b)for(g in this._fsm.existInput(b)||this._fsm.addInput(b),this._fsm.addTransition(a,c,b),this._fsm._list_of_state[a].transitionEvents)if(b=this._fsm._list_of_state[a].transitionEvents[g],
b.to===c)b.animation_out=e,b.animation_in=f},_animateComponents:function(a,c,b,e,f,g){var d=this,h,j=function(){try{f&&f.call(d._owner),d._delegate&&d._delegate.animationDidEnd&&(console.warn("animationDidEnd is deprecated. Please use 'controllerAnimationDidEnd'."),d._delegate.animationDidEnd(d)),d._delegate&&d._delegate.controllerAnimationDidEnd&&d._delegate.controllerAnimationDidEnd(a,c,d)}catch(b){console.error(b)}};h=function(){try{if(c.show(),!e&&!b)j.call(d);else{if(g){if(e){var f=e.durations;
e.durations="0s"}if(b){var h=b.durations;b.durations="0s"}}e&&!b?e.process(c,j,d):!e&&b?b.process(a,j,d):(e&&e.process(c,j,d),b&&b.process(a));if(g){if(e)e.durations=f;if(b)b.durations=h}}}catch(l){console.error(l)}};A.setTimeout(function(){h()},0)},componentBind:function(a,c,b,e){if(this._fsm){var f=this._fsm._list_of_state[a],d;f&&(d=f.bindings[c],d||(d=[],f.bindings[c]=d),d.push([b,e]),a===this._current_state&&f.comp.bind(c,b,e))}},refresh:function(){},getCurrentState:function(){if(this._fsm)return this._fsm._current_state},
configureNewComponent:function(){},_beforeStateEnter:function(a,c){if(a&&(a.comp_name||a.comp)){var b,e,f,d;if(!a.comp)a.comp=this._owner.createAndAddComponent(a.comp_name,a.init_data,a.extension),a.comp.configure(a.init_data),a.comp&&a.comp.propertiesDidChange&&a.comp.propertiesDidChange(),a.comp.propertyChange(),this.configureNewComponent(a.comp);f=c;a.data_adaptation_func&&(f=a.data_adaptation_func(c));if(f){for(e in f)if(a.comp.__lookupSetter__(e)||a.comp.hasOwnProperty(e))a.comp[e]=f[e];a.comp.propertyChange()}for(b in a.bindings)if(e=
a.bindings[b])for(f=0;f<e.length;f++)(d=e[f])&&(d[1]?a.comp.bind(b,d[0],d[1]):a.comp.bind(b,d[0]))}},_beforeStateExit:function(a){if(a&&a.comp){var c,b,e,f;for(c in a.bindings)if(b=a.bindings[c])for(e=0;e<b.length;e++)(f=b[e])&&(f[1]?a.comp.unbind(c,f[0],f[1]):a.comp.bind(c,f[0]))}},goTo:function(a,c,b,e){var f,d=null;if(!a||!this._list_of_state[a])return console.warn("vs.fx.Controller.goTo unknown State id:"+a),!1;this._current_state&&(b&&(d=this._list_of_state[this._current_state].transitionEvents[b.on]),
f=this._list_of_state[this._current_state],this.owner._beforeStateExit(f));this._current_state=a;a=this._list_of_state[this._current_state];this.owner._beforeStateEnter(a,b?b.data:null);f&&f.comp&&f.comp.viewWillDisappear&&f.comp.viewWillDisappear();a.comp.viewWillAppear&&a.comp.viewWillAppear();this.owner._delegate&&this.owner._delegate.controllerViewWillChange&&(f?this.owner._delegate.controllerViewWillChange(f.comp,a.comp,this.owner):this.owner._delegate.controllerViewWillChange(null,a.comp,this.owner));
d?this.owner._animateComponents(f.comp,a.comp,d.animation_out,d.animation_in,null,e):a.comp.show();if(c&&this._output_action[c])if(e=this._output_action[c],e instanceof Function)e.call(this._owner,b);else if(g.isString(e))this._owner[this._output_action[c]](b);return!0},notify:function(a,c){this._fsm&&a&&a.type&&this._fsm.fsmNotify(a.type,a.data,c)},clear:function(){this._fsm&&this._fsm.clear()}};g.extendClass(p,l.EventSource);g.defineClassProperties(p,{initialComponent:{set:function(a){if(!this._fsm||
!a)this._initial_component=w;else if(this._fsm.existState(a))this._initial_component=a,this._fsm.initialState=a,this._fsm.goTo(a)},get:function(){return this._initial_component}},delegate:{set:function(a){this._delegate=a}}});r.Controller=p;h.ANIMATION_DURATION=350;h.NEXT="next";h.PRED="pred";h.FIRST="first";h.prototype={_is_tactile:!1,_owner_handler_event_extended:!1,_owner_handler_event:null,_animation_duration:h.ANIMATION_DURATION,_last_comp_id:null,_states_array:null,__nb_panels:0,_view_size:null,
destructor:function(){delete this._states_array;p.prototype.destructor.call(this)},initComponent:function(){p.prototype.initComponent.call(this);this.isTactile=this._is_tactile;this._updateViewSize()},push:function(a,c,b,e){if(a&&(c||(c={}),a=p.prototype.push.call(this,a,c,b,e))){this._states_array.push(a);this.__nb_panels++;if(this.__nb_panels===1)return this._last_comp_id=this.initialComponent=a;this.addTransition(this._last_comp_id,a,h.NEXT);this.addTransition(a,this._last_comp_id,h.PRED);this.addTransition(a,
this._initial_component,h.FIRST);if(this._last_comp_id===this._initial_state){state=this._fsm._list_of_state[a];if(!state){console.error("Unknown error in vs.fx.StackController.push");return}if(!state.comp)state.comp=this._owner.createAndAddComponent(state.comp_name,state.init_data,b),state.comp.configure(state.init_data),state.comp.setStyle("position","absolute"),state.comp&&state.comp.propertiesDidChange&&state.comp.propertiesDidChange(),state.comp.propertyChange();state.comp.show()}return this._last_comp_id=
a}},_updateViewSize:function(){},remove:function(a){if(a){var c=null;if(g.isString(a))c=a;else if(!g.isString(a))c=a.id;var b=this._states_array.findItem(c);if(b!==-1){this._fsm.removeTransitionTo(c,h.NEXT);this._fsm.removeTransitionFrom(c,h.PRED);this._fsm.removeTransitionFrom(c,h.FIRST);this._states_array.remove(b);this.__nb_panels--;if(b===0&&this.__nb_panels>0)for(var e in this._initial_component=this._states_array[0],this._states_array)e!==c&&e!==this._initial_component&&(this._fsm.removeTransitionFrom(e,
h.FIRST),this.addTransition(e,this._initial_component,h.FIRST));if(this.__nb_panels===0)this._initial_component=w,this._fsm._current_state=w;this._initial_component&&(this._fsm._current_state===c?b===0?this._fsm.goTo(this._initial_component):(b===this._states_array.length&&b--,this._fsm.goTo(this._states_array[b])):this._fsm.goTo(this._fsm._current_state));p.prototype.remove.call(this,a)}}},orientationDidChange:function(){this._updateViewSize()},goToViewId:function(a,c){var b=this._states_array.findItem(a);
if(b===-1)return!1;this.goToViewAt(b,c)},goToViewAt:function(a,c){if(a<0)return!1;if(a>this._states_array.length)return!1;var b=this._states_array.findItem(this._fsm._current_state);if(b===a)return!0;if(a>b){for(;b<a-1;)this._fsm.fsmNotify(h.NEXT,null,!0),b++;return this._fsm.fsmNotify(h.NEXT,c)}else{for(;a+1<b;)this._fsm.fsmNotify(h.PRED,null,!0),b--;return this._fsm.fsmNotify(h.PRED,c)}},goToNextView:function(a){return this._fsm.fsmNotify(h.NEXT,null,a)},goToPreviousView:function(a){return this._fsm.fsmNotify(h.PRED,
null,a)},goToFirstView:function(a){return this._fsm.fsmNotify(h.FIRST,a)},handleEvent:function(){}};g.extendClass(h,p);g.defineClassProperties(h,{viewSize:{set:function(a){if(a&&g.isArray(a)&&a.length===2&&g.isNumber(a[0])&&g.isNumber(a[1])){if(!this._view_size)this._view_size=[];this._view_size[0]=a[0];this._view_size[1]=a[1];this._updateViewSize()}},get:function(){if(!this._view_size)return this._owner.size;return this._view_size.slice()}},isTactile:{set:function(a){if(a){this._is_tactile=!0;if(!this._owner_handler_event_extended)this._owner.view.addEventListener(l.POINTER_START,
this._owner,!1),this._owner_handler_event=this._owner.handleEvent,this._owner.handleEvent=this.handleEvent;this._owner_handler_event_extended=!0}else if(this._is_tactile=!1,this._owner_handler_event_extended)this._owner.view.removeEventListener(l.POINTER_START,this._owner,!1),this._owner.handleEvent=this._owner_handler_event,this._owner_handler_event_extended=!1},get:function(){return this._is_tactile}},animationDuration:{set:function(a){a||(a=0);if(g.isNumber(a))this._animation_duration=a}}});r.StackController=
h;n.ANIMATION_DURATION=500;n.HORIZONTAL=0;n.VERTICAL=1;n.prototype={_delta:0,_orientation:n.HORIZONTAL,_transition_out_1:null,_transition_out_2:null,_transition_clear:null,_updateViewSize:function(){var a=this.viewSize,c,b,e,d;if(this._orientation===n.HORIZONTAL)this._transition_out_1.x=-a[0],this._transition_out_1.y=0,this._transition_out_2.x=a[0],this._transition_out_2.y=0;else if(this._orientation===n.VERTICAL)this._transition_out_1.x=0,this._transition_out_1.y=-a[1],this._transition_out_2.x=0,
this._transition_out_2.y=a[1];this._orientation===n.HORIZONTAL?d="translate3D(-"+a[0]+"px,0,0)":this._orientation===n.VERTICAL&&(d="translate3D(0,-"+a[1]+"px,0)");for(c=0;c<this._states_array.length;c++)if(b=this._states_array[c],(e=this._fsm._list_of_state[b])&&e.comp)this._fsm._current_state===b?(this._orientation===n.HORIZONTAL?d="translate3D("+a[0]+"px,0,0)":this._orientation===n.VERTICAL&&(d="translate3D(0,"+a[1]+"px,0)"),e.comp.view.style.webkitTransitionDuration="0",s(e.comp.view,"translate3D(0,0,0)")):
(e.comp.view.style.webkitTransitionDuration="0",s(e.comp.view,d))},push:function(a,c,b,e){if(a&&(c||(c={}),a=p.prototype.push.call(this,a,c,b,e))){this._states_array.push(a);this.__nb_panels++;if(this.__nb_panels===1)return this._last_comp_id=this.initialComponent=a;this.addTransition(this._last_comp_id,a,h.NEXT,this._transition_out_1,this._transition_clear);this.addTransition(a,this._last_comp_id,h.PRED,this._transition_out_2,this._transition_clear);if(state=this._fsm._list_of_state[a]){if(this._last_comp_id===
this._initial_component){if(!state.comp)state.comp=this._owner.createAndAddComponent(state.comp_name,state.init_data,b),state.comp.configure(state.init_data),state.comp.setStyle("position","absolute"),state.comp&&state.comp.propertiesDidChange&&state.comp.propertiesDidChange(),state.comp.propertyChange();state.comp.show();state.comp.setStyle("z-index",this.__nb_panels);this.configureNewComponent(state.comp)}else state.comp&&(state.comp.setStyle("z-index",this.__nb_panels),this.configureNewComponent(state.comp));
return this._last_comp_id=a}else console.error("Unknown error in vs.fx.StackController.push")}},configureNewComponent:function(a){var c,b;b=this.viewSize;this._orientation===n.HORIZONTAL?c="translate3D("+b[0]+"px,0,0)":this._orientation===n.VERTICAL&&(c="translate3D(0,"+b[1]+"px,0)");a.view.style.webkitTransitionDuration="0";s(a.view,c)},handleEvent:function(a){var c=!1,b=this.size,e=this.__controller__._animation_duration;if(a.type===l.POINTER_START)this.__pos=this.__controller__._orientation===
n.HORIZONTAL?a.changedTouches?a.changedTouches[0].clientX:a.clientX:a.changedTouches?a.changedTouches[0].clientY:a.clientY,q.addEventListener(l.POINTER_END,this,!0),q.addEventListener(l.POINTER_MOVE,this,!0),this.__delta=this.animationDuration=0;else if(a.type===l.POINTER_MOVE)a.preventDefault(),this.__delta=this.__controller__._orientation===n.HORIZONTAL?a.changedTouches?a.changedTouches[0].clientX-this.__pos:a.clientX-this.__pos:a.changedTouches?a.changedTouches[0].clientY-this.__pos:a.clientY-
this.__pos;else if(a.type===l.POINTER_END){this.__delta>50?c=this.__controller__.goToPreviousView():this.__delta<-50&&(c=this.__controller__.goToNextView());if(!c)this.animationDuration=e=this.__controller__._orientation===n.HORIZONTAL?Math.floor(e*this.__delta/b[0]):Math.floor(e*this.__delta/b[1]);q.removeEventListener(l.POINTER_END,this,!0);q.removeEventListener(l.POINTER_MOVE,this,!0)}},refresh:function(){h.prototype.refresh.call(this);this._updateViewSize()}};g.extendClass(n,h);g.defineClassProperties(n,
{orientation:{set:function(a){if(!(a!==n.HORIZONTAL&&a!==n.VERTICAL))this._orientation=a,this._updateViewSize()},get:function(){return this._orientation}},animationDuration:{set:function(a){a||(a=0);if(g.isNumber(a))this._animation_duration=a,this._transition_out_1.duration=this._animation_duration+"ms",this._transition_out_2.duration=this._animation_duration+"ms",this._transition_clear.duration=this._animation_duration+"ms"}}});r.SlideController=n;k.NO_ANIMATION=0;k.CARD_ANIMATION=1;k.SLIDE_ANIMATION=
2;k.DEFAULT_ANIMATION=k.SLIDE_ANIMATION;k.BACK="back";k.prototype={_nav_bar:null,__nav_bar_states:null,_animation_type:k.DEFAULT_ANIMATION,destructor:function(){p.prototype.destructor.call(this)},initComponent:function(){p.prototype.initComponent.call(this);var a=this._owner.size;this.__translate_in_right=new TranslateAnimation(0);this.__translate_out_right=new TranslateAnimation(a[0]);this.__translate_out_left=new TranslateAnimation(-a[0]);this.__translate_in_left=new TranslateAnimation(0)},setNavigationBar:function(a){if(a&&
!(!a instanceof O.NavigationBar))this._nav_bar=a},refresh:function(){p.prototype.refresh.call(this);this._updateViewSize()},_updateViewSize:function(){var a=this.viewSize;this.__translate_out_left.x=-a[0];this.__translate_out_right.x=a[0]},push:function(a,c,b){if(a&&(c||(c={}),a=p.prototype.push.call(this,a,c,null,b)))return(c=this._fsm._list_of_state[a])&&c.comp&&this.configureNewComponent(c.comp),a},configureNavigationBarState:function(a,c){var b,e,d,h,j=[],k={};if(this._fsm._list_of_state[a]&&
c){e=0;for(d=c.length;e<d;e++)if(h=c[e])if(b=h.comp)if(g.isString(b)&&(b=l.Object._obs[b]),!(!b instanceof y.ui.View)&&(j.push(b),h.properties))k[b.id]=h.properties;this.__nav_bar_states[a]=k;this._nav_bar&&this._nav_bar.setStateItems(a,j)}},configureTransition:function(a,c,b){if(a&&this._fsm.existState(a)&&c&&this._fsm.existState(c)&&b)this._fsm.existInput(b)||this._fsm.addInput(b),this._animation_type===k.SLIDE_ANIMATION?(this.addTransition(a,c,b,this.__translate_out_left,this.__translate_in_right),
this.addTransition(c,a,k.BACK,this.__translate_out_right,this.__translate_in_left),this.__translate_in_left.duration="300ms",this.__translate_out_left.duration="300ms",this.__translate_in_right.duration="300ms",this.__translate_out_right.duration="300ms"):this._animation_type===k.CARD_ANIMATION?(this.addTransition(a,c,b,null,this.__translate_in_right),this.addTransition(c,a,k.BACK,this.__translate_out_right,null),this.__translate_in_right.duration="300ms",this.__translate_out_right.duration="300ms"):
(this.addTransition(a,c,b,null,this.__translate_in_right),this.addTransition(c,a,k.BACK,this.__translate_out_right,null),this.__translate_in_right.duration="0",this.__translate_out_right.duration="0")},configureNewComponent:function(a){a.translation=[this.viewSize[0],0]},goTo:function(a,c,b,e){p.prototype.goTo.call(this,a,c,b,e)&&this.owner._nav_bar&&this.owner._nav_bar.changeState(a,this.owner.__nav_bar_states[a])}};g.extendClass(k,h);g.defineClassProperties(k,{viewSize:{set:function(a){if(a&&g.isArray(a)&&
a.length===2&&g.isNumber(a[0])&&g.isNumber(a[1])){if(!this._view_size)this._view_size=[];this._view_size[0]=a[0];this._view_size[1]=a[1];this._updateViewSize()}},get:function(){if(!this._view_size)return this._owner.size;return this._view_size.slice()}},initialComponent:{set:function(a){if(a){if(this._fsm.existState(a)&&(this._initial_component=a,this._fsm.initialState=a,this._fsm.goTo(a),(a=this._fsm._list_of_state[a])&&a.comp))a.comp.translation=[0,0]}else this._initial_component=w},get:function(){return this._initial_component}}});
r.NavigationController=k;j.ANIMATION_DURATION=500;j.LEFT_OUT=0;j.RIGHT_OUT=1;j.TOP_OUT=2;j.BOTTOM_OUT=3;j.prototype={_direction:j.LEFT_OUT,_transition_out:null,_transition_clear:null,_updateViewSize:function(){var a=this.viewSize;if(this._transition_out)this._direction===j.LEFT_OUT?(this._transition_out.x=-a[0],this._transition_out.y=0):this._direction===j.RIGHT_OUT?(this._transition_out.x=a[0],this._transition_out.y=0):this._direction===j.BOTTOM_OUT?(this._transition_out.x=0,this._transition_out.y=
a[1]):(this._transition_out.x=0,this._transition_out.y=-a[1])},push:function(a,c,b,e){if(a&&(c||(c={}),a=p.prototype.push.call(this,a,c,b,e))){this._states_array.push(a);this.__nb_panels++;if(this.__nb_panels===1)return this._last_comp_id=this.initialComponent=a;this.addTransition(this._last_comp_id,a,h.NEXT,null,this._transition_clear);this.addTransition(a,this._last_comp_id,h.PRED,this._transition_out,null);if(state=this._fsm._list_of_state[a]){if(this._last_comp_id===this._initial_component){if(!state.comp)state.comp=
this._owner.createAndAddComponent(state.comp_name,state.init_data,b),state.comp.configure(state.init_data),state.comp.setStyle("position","absolute"),state.comp&&state.comp.propertiesDidChange&&state.comp.propertiesDidChange(),state.comp.propertyChange();state.comp.show();state.comp.setStyle("z-index",this.__nb_panels);this.configureNewComponent(state.comp)}else state.comp&&(state.comp.setStyle("z-index",this.__nb_panels),this.configureNewComponent(state.comp));return this._last_comp_id=a}else console.error("Unknown error in vs.fx.StackController.push")}},
configureNewComponent:function(a){var c,b;b=this.viewSize;c=o?"translate3d":"translate";c+=this._direction===j.LEFT_OUT?"(-"+b[0]+"px,0":this._direction===j.RIGHT_OUT?"("+b[0]+"px,0":this._direction===j.BOTTOM_OUT?"(0,"+b[1]+"px":"(0,-"+b[1]+"px";c+=o?",0)":")";a.view.style.webkitTransitionDuration="0";s(a.view,c)},handleEvent:function(a){var c=!1,b,e;if(a.type===l.POINTER_START)this.__pos=this.__controller__._direction===j.LEFT_OUT||this.__controller__._direction===j.RIGHT_OUT?a.changedTouches?a.changedTouches[0].clientX:
a.clientX:a.changedTouches?a.changedTouches[0].clientY:a.clientY,q.addEventListener(l.POINTER_END,this,!0),q.addEventListener(l.POINTER_MOVE,this,!0);else if(a.type===l.POINTER_MOVE)if(a.preventDefault(),b=this.__controller__._fsm._list_of_state[this.__controller__._fsm._current_state],c=this.__controller__._states_array.indexOf(this.__controller__._fsm._current_state),c>0&&(e=this.__controller__._states_array[c-1]),this.__controller__._direction===j.LEFT_OUT||this.__controller__._direction===j.RIGHT_OUT?
(this.__delta=a.changedTouches?a.changedTouches[0].clientX-this.__pos:a.clientX-this.__pos,a=o?"translate3d("+this.__delta+"px,0px,0)":"translate("+this.__delta+"px,0px)"):(this.__delta=a.changedTouches?a.changedTouches[0].clientY-this.__pos:a.clientY-this.__pos,a=o?"translate3d(0px,"+this.__delta+"px,0)":"translate(0px,"+this.__delta+"px)"),this.__controller__._direction===j.LEFT_OUT||this.__controller__._direction===j.TOP_OUT)if(this.__delta<0)b.comp.view.style.webkitTransitionDuration=0,s(b.comp.view,
a);else{if(e&&(b=this.__controller__._fsm._list_of_state[e])&&b.comp)a=this.__controller__._direction===j.LEFT_OUT||this.__controller__._direction===j.RIGHT_OUT?o?"translate3d("+(this.__delta-this._size[0])+"px,0px,0)":"translate("+(this.__delta-this._size[0])+"px,0px)":o?"translate3d(0px,"+(this.__delta-this._size[1])+"px,0)":"translate(0px,"+(this.__delta-this._size[1])+"px)",b.comp.view.style.webkitTransitionDuration=0,s(b.comp.view,a)}else if(this.__delta>0)b.comp.view.style.webkitTransitionDuration=
0,s(b.comp.view,a);else{if(e&&(b=this.__controller__._fsm._list_of_state[e])&&b.comp)a=this.__controller__._direction===j.LEFT_OUT||this.__controller__._direction===j.RIGHT_OUT?o?"translate3d("+(this._size[0]+this.__delta)+"px,0px,0)":"translate("+(this._size[0]+this.__delta)+"px,0px)":o?"translate3d(0px,"+(this._size[1]+this.__delta)+"px,0)":"translate(0px,"+(this._size[1]+this.__delta)+"px)",b.comp.view.style.webkitTransitionDuration=0,s(b.comp.view,a)}else if(a.type===l.POINTER_END){b=this.__controller__._fsm._list_of_state[this.__controller__._fsm._current_state];
this.__controller__._direction===j.LEFT_OUT||this.__controller__._direction===j.TOP_OUT?this.__delta>50?c=this.__controller__.goToPreviousView():this.__delta<-50&&(c=this.__controller__.goToNextView()):this.__delta>50?c=this.__controller__.goToNextView():this.__delta<-50&&(c=this.__controller__.goToPreviousView());if(!c)if(c=this.__controller__._states_array.indexOf(this.__controller__._fsm._current_state),c>0&&(e=this.__controller__._states_array[c-1]),(this.__controller__._direction===j.LEFT_OUT||
this.__controller__._direction===j.TOP_OUT)&&this.__delta<0)a=o?"translate3d(0,0,0)":"translate(0,0)",b.comp.view.style.webkitTransitionDuration=this.__controller__._animation_duration+"ms",s(b.comp.view,a);else if((this.__controller__._direction===j.RIGHT_OUT||this.__controller__._direction===j.BOTTOM_OUT)&&this.__delta>0)a=o?"translate3d(0,0,0)":"translate(0,0)",b.comp.view.style.webkitTransitionDuration=this.__controller__._animation_duration+"ms",s(b.comp.view,a);else if(e&&(b=this.__controller__._fsm._list_of_state[e])&&
b.comp)a=this.__controller__._direction===j.LEFT_OUT?"(-"+this._size[0]+"px,0px":this.__controller__._direction===j.RIGHT_OUT?"("+this._size[0]+"px,0px":this.__controller__._direction===j.BOTTOM_OUT?"(0px,"+this._size[1]+"px":"(0px,-"+this._size[1]+"px",a+=o?",0)":")",b.comp.view.style.webkitTransitionDuration=this.__controller__._animation_duration+"ms",s(b.comp.view,a);q.removeEventListener(l.POINTER_END,this,!0);q.removeEventListener(l.POINTER_MOVE,this,!0)}}};g.extendClass(j,h);g.defineClassProperties(j,
{direction:{set:function(a){if(!(a!==j.LEFT_OUT&&a!==j.RIGHT_OUT&&a!==j.BOTTOM_OUT&&a!==j.TOP_OUT))this._direction=a,this._updateViewSize()},get:function(){return this._direction}},animationDuration:{set:function(a){a||(a=0);if(g.isNumber(a)){this._animation_duration=a;if(this._transition_out)this._transition_out.duration=this._animation_duration+"ms";if(this._transition_clear)this._transition_clear.duration=this._animation_duration+"ms"}}}});r.CardController=j;m._translate_animation=new RotateXYZAnimation(-90,
0,0);m._translate_animation.init();m._translate_animation.addKeyFrame("from",{degX:0});m._translate_animation.addKeyFrame(50,{degX:-92});m._translate_animation.addKeyFrame(70,{degX:-84});m._translate_animation.addKeyFrame(80,{degX:-90});m._translate_animation.addKeyFrame(95,{degX:-88});m._translate_animation.durations="2s";m.HORIZONTAL=0;m.VERTICAL=1;m.prototype={_orientation:m.HORIZONTAL,push:function(a,c,b){if(a){if(!g.isString(a)){var e=this._states_array.length;a.position=[0,0];a.setStyle("z-index",
1E3-e)}return h.prototype.push.call(this,a,c,b)}},handleEvent:function(a){var c=!1,b,e;if(a.type===l.POINTER_START)this.__pos=this.__layer._orientation===m.HORIZONTAL?a.changedTouches?a.changedTouches[0].clientX:a.clientX:a.changedTouches?a.changedTouches[0].clientY:a.clientY,q.addEventListener(l.POINTER_END,this,!0),q.addEventListener(l.POINTER_MOVE,this,!0),this.animationDuration=0;else if(a.type===l.POINTER_MOVE)if(a.preventDefault(),b=this.__layer._list_of_state[this.__layer._current_state],c=
this.__layer._states_array.indexOf(this.__layer._current_state),c>0&&(e=this.__layer._states_array[c-1]),this.__layer._orientation===m.HORIZONTAL?(this.__delta=a.changedTouches?a.changedTouches[0].clientX-this.__pos:a.clientX-this.__pos,a=o?"translate3d("+this.__delta+"px,0px,0)":"translate("+this.__delta+"px,0px)"):(this.__delta=a.changedTouches?a.changedTouches[0].clientY-this.__pos:a.clientY-this.__pos,a=o?"translate3d(0px,"+this.__delta+"px,0)":"translate(0px,"+this.__delta+"px)"),this.__delta<
0)b.comp.view.style.webkitTransitionDuration=0,s(b.comp.view,a);else{if(e&&(b=this.__layer._list_of_state[e])&&b.comp)a=this.__layer._orientation===m.HORIZONTAL?o?"translate3d("+(this.__delta-this._size[0])+"px,0px,0)":"translate("+(this.__delta-this._size[0])+"px,0px)":o?"translate3d(0px,"+(this.__delta-this._size[1])+"px,0)":"translate(0px,"+(this.__delta-this._size[1])+"px)",b.comp.view.style.webkitTransitionDuration=0,s(b.comp.view,a)}else if(a.type===l.POINTER_END){b=this.__layer._list_of_state[this.__layer._current_state];
this.__delta>50?c=this.__layer.goToPreviousView():this.__delta<-50&&(c=this.__layer.goToNextView());if(!c)if(c=this.__layer._states_array.indexOf(this.__layer._current_state),c>0&&(e=this.__layer._states_array[c-1]),this.__delta<0)a=o?"translate3d(0,0,0)":"translate(0,0)",b.comp.view.style.webkitTransitionDuration=this.__layer._animation_duration+"ms",s(b.comp.view,a);else if(e&&(b=this.__layer._list_of_state[e])&&b.comp)a=this.__layer._orientation===m.HORIZONTAL?o?"translate3d("+this._size[0]+"px,0px,0)":
"translate("+this._size[0]+"px,0px)":o?"translate3d(0px,-"+this._size[1]+"px,0)":"translate(0px,-"+this._size[1]+"px)",b.comp.view.style.webkitTransitionDuration=this.__layer._animation_duration+"ms",s(b.comp.view,a);q.removeEventListener(l.POINTER_END,this,!0);q.removeEventListener(l.POINTER_MOVE,this,!0)}},goTo:function(a,c,b){function e(a){var b=this._list_of_state[this._states_array[a]];if(b){if(!b.comp)b.comp=this.owner.createAndAddComponent(b.comp_name,b.init_data,b.extension),b.comp.configure(b.init_data),
b.comp.style("position","absolute"),b.comp&&b.comp.propertiesDidChange&&b.comp.propertiesDidChange(),b.comp.propertyChange();b.view?__setPos(b.view,0,0):b.comp.position=[0,0];b.comp.show();b.comp.style("z-index",1E3-a)}}var d=this._states_array.indexOf(a),j=this._list_of_state[this._current_state];h.prototype.goTo.call(this,a,c,b);if(a){this.owner.animationDuration=this._animation_duration;a=this._list_of_state[this._current_state];a.comp.setStyle("position","absolute");a.comp.position=[0,0];a.comp.setStyle("z-index",
1E3-d);j&&a&&(j.comp.setStyle("-webkit-transform","scale3d(.835,.835,.835) translateZ(200px)"),a.comp.setStyle("-webkit-transform","scale3d(.835,.835,.835) rotateX(90deg) translateZ(200px)"));d>0&&e.call(this,d-1);d<this._states_array.length-1&&e.call(this,d+1);if(b&&b.on===h.NEXT&&j)m._translate_animation.process(this.owner);else if(b&&b.on===h.PRED&&a)m._translate_animation.x=0,m._translate_animation.y=0,m._translate_animation.process(a.comp);if(c&&this._output_action[c])if(d=this._output_action[c],
d instanceof Function)d.call(this.owner,b);else if(g.isString(d))this.owner[this._output_action[c]](b)}}};g.extendClass(m,h);r.CubicController=m;t._opacity_animation=new OpacityAnimation(1);t._opacity_animation.init();t._opacity_animation.durations="0.2s";t.ANIMATION_DURATION=500;t.prototype={push:function(a,c,b){if(a){if(!g.isString(a)){var d=this._states_array.length;a.position=[0,0];a.setStyle("z-index",1E3-d)}h.prototype.push.call(this,a,c,b)}},goTo:function(a,c,b){function d(a){var b=this._list_of_state[this._states_array[a]];
if(b){if(!b.comp)b.comp=this.owner.createAndAddComponent(b.comp_name,b.init_data,b.extension),b.comp.configure(b.init_data),b.comp.setStyle("position","absolute"),b.comp&&b.comp.propertiesDidChange&&b.comp.propertiesDidChange(),b.comp.propertyChange();b.view?__setPos(b.view,0,0):b.comp.position=[0,0];b.comp.show();b.comp.setStyle("z-index",1E3-a)}}var f=this._states_array.indexOf(a),j=this._list_of_state[this._current_state];h.prototype.goTo.call(this,a,c,b);if(a){a=this._list_of_state[this._current_state];
a.comp.setStyle("position","absolute");a.comp.position=[0,0];a.comp.setStyle("z-index",1E3-f);f>0&&d.call(this,f-1);f<this._states_array.length-1&&d.call(this,f+1);if(b&&b.on===h.NEXT&&j)t._opacity_animation.value=0,t._opacity_animation.process(j.comp);else if(b&&b.on===h.PRED&&a)t._opacity_animation.value=1,t._opacity_animation.process(a.comp);if(c&&this._output_action[c])if(f=this._output_action[c],f instanceof Function)f.call(this.owner,b);else if(g.isString(f))this.owner[this._output_action[c]](b)}}};
g.extendClass(t,h);g.defineClassProperty(t,"animationDuration",{set:function(a){a||(a=0);if(g.isNumber(a))this._animation_duration=a,t._opacity_animation.durations=a/1E3+"s"}});r.OpacityController=t})(window);
